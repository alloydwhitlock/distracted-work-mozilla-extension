<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../shared/themes.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: var(--font, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif);
      width: 340px; padding: 1rem; font-size: 14px;
      background: var(--bg); color: var(--text);
      transition: background-color 0.3s, color 0.3s;
    }

    .header {
      display: flex; align-items: center; justify-content: space-between;
      margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--divider);
    }
    .header h1 { font-size: 1rem; font-weight: 700; }

    .status-badge {
      font-size: 0.75rem; font-weight: 600; padding: 0.2rem 0.6rem;
      border-radius: 12px; text-transform: uppercase; letter-spacing: 0.03em;
    }
    .status-badge.active { background: #d4edda; color: #155724; }
    .status-badge.paused { background: #f8d7da; color: #721c24; }
    .status-badge.scheduled { background: #fff3cd; color: #856404; }

    .section { margin-bottom: 1rem; }
    .section-title {
      font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em;
      color: var(--text-muted); margin-bottom: 0.5rem; font-weight: 600;
    }

    .toggle-row { display: flex; align-items: center; justify-content: space-between; padding: 0.5rem 0; }
    .toggle-label { font-size: 0.9rem; font-weight: 500; }
    .toggle { position: relative; width: 42px; height: 24px; }
    .toggle input { opacity: 0; width: 0; height: 0; }
    .toggle-slider {
      position: absolute; cursor: pointer; inset: 0;
      background-color: #ccc; border-radius: 24px; transition: 0.3s;
    }
    .toggle-slider::before {
      position: absolute; content: ""; height: 18px; width: 18px;
      left: 3px; bottom: 3px; background-color: white; border-radius: 50%; transition: 0.3s;
    }
    .toggle input:checked + .toggle-slider { background-color: var(--accent); }
    .toggle input:checked + .toggle-slider::before { transform: translateX(18px); }

    .quick-add { display: flex; gap: 0.5rem; }
    .quick-add input {
      flex: 1; padding: 0.5rem 0.75rem; border: 1px solid var(--input-border);
      border-radius: 6px; font-size: 0.85rem; outline: none;
      background: var(--input-bg); color: var(--text);
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    .quick-add input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 15%, transparent);
    }
    .quick-add button {
      padding: 0.5rem 0.75rem; background: var(--accent); color: #fff;
      border: none; border-radius: 6px; font-size: 0.85rem; font-weight: 600;
      cursor: pointer; white-space: nowrap;
    }
    .quick-add button:hover { background: var(--accent-hover); }

    .site-count { font-size: 0.85rem; color: var(--text-muted); padding: 0.25rem 0; }
    .site-count strong { color: var(--text); }

    .btn-row { display: flex; gap: 0.5rem; margin-top: 0.25rem; }
    .btn {
      flex: 1; padding: 0.5rem; border: 1px solid var(--input-border); border-radius: 6px;
      background: var(--input-bg); color: var(--text); font-size: 0.8rem;
      cursor: pointer; text-align: center; text-decoration: none; font-weight: 500;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    .btn:hover { opacity: 0.85; }
    .btn-donate { background: #ff6b35; color: #fff; border-color: #ff6b35; }
    .btn-donate:hover { background: #e55a28; border-color: #e55a28; opacity: 1; }

    .message { font-size: 0.8rem; padding: 0.4rem 0; display: none; }
    .message.success { color: #155724; display: block; }
    .message.error { color: #721c24; display: block; }
    body.dark .message.success { color: #4caf50; }
    body.dark .message.error { color: #ff6b6b; }

    .permanent-option {
      display: flex; align-items: center; gap: 0.4rem;
      font-size: 0.8rem; color: var(--text-muted); margin-top: 0.3rem;
    }
    .permanent-option input[type="checkbox"] { margin: 0; }

    .popup-attribution {
      text-align: center; margin-top: 0.5rem; padding-top: 0.5rem;
      border-top: 1px solid var(--divider); font-size: 0.7rem; color: var(--text-muted);
    }
    .popup-attribution a { color: var(--accent); text-decoration: none; }
    .popup-attribution a:hover { text-decoration: underline; }
  </style>
</head>
<body class="light">
  <div class="header">
    <h1>Distracted Work</h1>
    <span class="status-badge" id="statusBadge">Active</span>
  </div>

  <div class="section">
    <div class="toggle-row">
      <span class="toggle-label">Blocking enabled</span>
      <label class="toggle">
        <input type="checkbox" id="enableToggle" checked>
        <span class="toggle-slider"></span>
      </label>
    </div>
    <p class="site-count">Blocking <strong id="siteCount">0</strong> sites</p>
  </div>

  <div class="section">
    <div class="section-title">Quick Block a Site</div>
    <div class="quick-add">
      <input type="text" id="siteInput" placeholder="e.g. reddit.com" autocomplete="off">
      <button id="addSiteBtn">Block</button>
    </div>
    <div class="permanent-option">
      <input type="checkbox" id="permanentCheck">
      <label for="permanentCheck">Permanent (always on, ignores schedule)</label>
    </div>
    <div class="message" id="feedbackMsg"></div>
  </div>

  <div class="section">
    <div class="btn-row">
      <button class="btn" id="optionsBtn">Options</button>
      <button class="btn" id="themeBtn">Auto</button>
      <a class="btn btn-donate" id="donateBtn" href="https://ko-fi.com/alloydwhitlock" target="_blank">Donate</a>
    </div>
  </div>

  <div class="popup-attribution" id="popupAttribution">
    Brought to you by <a href="https://adamwhitlock.com" target="_blank">Adam Whitlock</a>
  </div>

  <script src="popup.js"></script>
</body>
</html>
